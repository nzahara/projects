{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\noorz\\\\Documents\\\\DB\\\\Repo\\\\db_project\\\\db_UI_React\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\noorz\\\\Documents\\\\DB\\\\Repo\\\\db_project\\\\db_UI_React\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\noorz\\\\Documents\\\\DB\\\\Repo\\\\db_project\\\\db_UI_React\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\noorz\\\\Documents\\\\DB\\\\Repo\\\\db_project\\\\db_UI_React\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\noorz\\\\Documents\\\\DB\\\\Repo\\\\db_project\\\\db_UI_React\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\noorz\\\\Documents\\\\DB\\\\Repo\\\\db_project\\\\db_UI_React\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\noorz\\\\Documents\\\\DB\\\\Repo\\\\db_project\\\\db_UI_React\\\\src\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport RegisterComponent from '../Register/RegisterComponent';\nimport LoginComponent from '../LoginComponent/LoginComponent';\nimport './Login.css';\nimport images from '../Images/UNCC_1.jpg';\nimport RegisterDetails from '../Register/RegisterDetails';\nimport LoginService from './LoginService';\nimport { Redirect } from 'react-router-dom';\n\nvar sessionstorage = require('sessionstorage');\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.registerDetails = new RegisterDetails();\n    _this.loginService = new LoginService();\n    _this.state = {\n      signup: false,\n      login: true,\n      userId: 0,\n      password: '',\n      redirectLogin: false,\n      userType: ''\n    };\n\n    _this.switch = function (word) {\n      var signup, login;\n\n      if (word === \"signup\") {\n        signup = true;\n        login = false;\n      } else {\n        login = true;\n        signup = false;\n      }\n\n      return _this.setState({\n        login: login,\n        signup: signup\n      });\n    };\n\n    _this.registerUser = function (registerDetails) {\n      console.log(registerDetails);\n\n      _this.loginService.registerUserData(registerDetails).then(function (response) {\n        console.log(typeof response);\n\n        if (typeof response == 'string') {\n          alert(response);\n          return;\n        }\n\n        if (response == -1) {\n          alert(\"Unable to register User !\");\n          return;\n        }\n\n        if (response == -2) {\n          alert(\"Email already exists!Kindly login.\");\n          return;\n        } //  console.log(response.data);\n\n\n        alert(\"User Id created :\" + response);\n      });\n    };\n\n    _this.loginUser = function (userId, password) {\n      _this.setState({\n        userId: userId,\n        password: password\n      });\n\n      _this.loginService.loginUser(userId, password).then(function (response) {\n        console.log(response);\n        sessionstorage.setItem('userId', userId);\n        sessionstorage.setItem('userType', response.toString());\n        console.log(typeof sessionstorage.getItem('userId'));\n        console.log(typeof sessionstorage.getItem('userType'));\n\n        if (response.toString() == \"\") {\n          alert(\"User is not registered !\");\n          return;\n        } //  if(response.toString() == \"S\") {\n\n\n        alert(\"Successfully Logged In!\");\n\n        _this.setState({\n          redirectLogin: true,\n          userType: response.toString()\n        });\n\n        return; //  }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      if (this.state.redirectLogin) {\n        return React.createElement(Redirect, {\n          to: {\n            pathname: '/student',\n            state: _objectSpread({}, this.state)\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        width: \"250\",\n        alt: \"University Logo\",\n        src: images,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        id: \"signupButton\",\n        onClick: this.switch.bind(null, \"signup\"),\n        className: this.state.signup ? \"yellow\" : \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Register\"), React.createElement(\"p\", {\n        id: \"loginButton\",\n        onClick: this.switch.bind(null, \"login\"),\n        className: this.state.login ? \"yellow\" : \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \" Login\"), this.state.signup ? React.createElement(RegisterComponent, {\n        registerObject: this.registerDetails,\n        onSubmit: this.registerUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }) : null, this.state.login ? React.createElement(LoginComponent, {\n        onLogin: this.loginUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }) : null));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport { Login as default };","map":{"version":3,"sources":["C:\\Users\\noorz\\Documents\\DB\\Repo\\db_project\\db_UI_React\\src\\Login\\Login.js"],"names":["React","Component","RegisterComponent","LoginComponent","images","RegisterDetails","LoginService","Redirect","sessionstorage","require","Login","registerDetails","loginService","state","signup","login","userId","password","redirectLogin","userType","switch","word","setState","registerUser","console","log","registerUserData","then","response","alert","loginUser","setItem","toString","getItem","pathname","bind"],"mappings":"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","sourcesContent":["import React, {\r\n  Component\r\n} from 'react';\r\nimport RegisterComponent from '../Register/RegisterComponent';\r\nimport LoginComponent from '../LoginComponent/LoginComponent';\r\nimport './Login.css';\r\nimport images from '../Images/UNCC_1.jpg';\r\nimport RegisterDetails from '../Register/RegisterDetails';\r\nimport LoginService from './LoginService';\r\nimport {\r\n  Redirect\r\n} from 'react-router-dom';\r\nvar sessionstorage = require('sessionstorage');\r\n\r\nexport default class Login extends Component {\r\n\r\n  // getInitialState = () => {\r\n  //   return {signup:false,login:true};\r\n  // }\r\n  registerDetails = new RegisterDetails();\r\n  loginService = new LoginService();\r\n  state = {\r\n    signup: false,\r\n    login: true,\r\n    userId: 0,\r\n    password: '',\r\n    redirectLogin: false,\r\n    userType: ''\r\n  }\r\n\r\n  switch = (word) => {\r\n    var signup, login;\r\n    if (word === \"signup\") {\r\n      signup = true;\r\n      login = false;\r\n    } else {\r\n      login = true;\r\n      signup = false;\r\n    }\r\n    return this.setState({\r\n      login: login,\r\n      signup: signup\r\n    })\r\n\r\n  }\r\n\r\n  registerUser = (registerDetails) => {\r\n    console.log(registerDetails);\r\n    this.loginService.registerUserData(registerDetails).then(\r\n      response => {\r\n        console.log(typeof response);\r\n        if (typeof(response) == 'string') {\r\n          alert(response);\r\n          return;\r\n        }\r\n        if (response == -1) {\r\n          alert(\"Unable to register User !\");\r\n          return;\r\n        }\r\n        if (response == -2) {\r\n          alert(\"Email already exists!Kindly login.\");\r\n          return;\r\n        }\r\n        //  console.log(response.data);\r\n        alert(\"User Id created :\" + response);\r\n      });\r\n  }\r\n\r\n  loginUser = (userId, password) => {\r\n    this.setState({\r\n      userId: userId,\r\n      password: password\r\n    })\r\n    this.loginService.loginUser(userId, password).then(\r\n      response => {\r\n        console.log(response);\r\n        sessionstorage.setItem('userId',userId);\r\n        sessionstorage.setItem('userType',response.toString());\r\n        console.log(typeof sessionstorage.getItem('userId'));\r\n        console.log(typeof sessionstorage.getItem('userType'));\r\n        if (response.toString() == \"\") {\r\n          alert(\"User is not registered !\");\r\n          return;\r\n        }\r\n        //  if(response.toString() == \"S\") {\r\n        alert(\"Successfully Logged In!\");\r\n        this.setState({\r\n          redirectLogin: true,\r\n          userType: response.toString()\r\n        });\r\n        return;\r\n        //  }\r\n      }\r\n    )\r\n  }\r\n\r\nrender() {\r\n  if(this.state.redirectLogin){\r\n    return(\r\n  <Redirect to = {{pathname : '/student', state : {...this.state}}}/>\r\n)\r\n}\r\nreturn(\r\n<div>\r\n<div align =\"center\">\r\n<img  width=\"250\" alt=\"University Logo\" src = {images} />\r\n</div>\r\n  <div id=\"buttons\">\r\n        <p id=\"signupButton\"  onClick={this.switch.bind(null,\"signup\")} className={this.state.signup ? \"yellow\":\"blue\"}>Register</p>\r\n        <p id=\"loginButton\" onClick={this.switch.bind(null,\"login\")} className={this.state.login ? \"yellow\":\"blue\"}> Login</p>\r\n        { this.state.signup?<RegisterComponent registerObject = {this.registerDetails} onSubmit = {this.registerUser} /> : null}\r\n        {this.state.login? <LoginComponent onLogin = {this.loginUser}/> : null}\r\n  </div>\r\n\r\n</div>\r\n  );\r\n}\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}